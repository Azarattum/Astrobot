(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{112:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return OperationMapper})),a.d(e,"i",(function(){return j})),a.d(e,"c",(function(){return E})),a.d(e,"f",(function(){return A})),a.d(e,"e",(function(){return P})),a.d(e,"d",(function(){return S})),a.d(e,"k",(function(){return x})),a.d(e,"g",(function(){return C})),a.d(e,"h",(function(){return F})),a.d(e,"j",(function(){return L})),a.d(e,"b",(function(){return M}));var n=a(0),r=a(140),u=a(191),s=a(1),o=a(714),c=a(715),i=a(716),p=a(717),l=a(718),f=a(719),d=a(720),m=a(721),h=a(722),b=a(723),g=a(724),N=a(725),y=a(726),D=a(727),w=a(728),O=a(729),k=a(730),T=a(731),V=a(732);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
class OperationMapper{constructor(){const t=[].concat(...[o,c,i,p,l,f,d,m,h,b,g,N,y,D,w,O,k,T,V].map(t=>t.json));this.opMappers=t.reduce((t,e)=>(t[e.tfOpName]=e,t),{})}static get Instance(){return this._instance||(this._instance=new this)}transformGraph(t,e={}){const a=t.node,n=[],r=[],u=[],o=a.reduce((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")?n.push(t[e.name]):"Const"===e.op?r.push(t[e.name]):null!=e.input&&0!==e.input.length||u.push(t[e.name]),t),{});let c=[];const i=[];let p={},l={};null!=e&&(p=this.mapSignatureEntries(e.inputs),l=this.mapSignatureEntries(e.outputs));const f=Object.keys(o);f.forEach(t=>{const e=o[t];e.inputNames.forEach((t,a)=>{const[n,,r]=Object(s.b)(t),u=o[n];if(null!=u.outputs){const t=u.outputs.indexOf(r);if(-1!==t){const r=`${n}:${t}`;e.inputNames[a]=r}}e.inputs.push(u),u.children.push(e)})}),0===Object.keys(l).length?f.forEach(t=>{const e=o[t];0===e.children.length&&i.push(e)}):Object.keys(l).forEach(t=>{const[e]=Object(s.b)(t),a=o[e];null!=a&&(a.signatureKey=l[t],i.push(a))}),Object.keys(p).length>0?Object.keys(p).forEach(t=>{const[e]=Object(s.b)(t),a=o[e];a&&(a.signatureKey=p[t],c.push(a))}):c=n;let d={};null!=t.library&&null!=t.library.function&&(d=t.library.function.reduce((t,e)=>(t[e.signature.name]=this.mapFunction(e),t),{}));const m={nodes:o,inputs:c,outputs:i,weights:r,placeholders:n,signature:e,functions:d};return u.length>0&&(m.initNodes=u),m}mapSignatureEntries(t){return Object.keys(t||{}).reduce((e,a)=>(e[t[a].name]=a,e),{})}mapNode(t){const e=Object(u.a)(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const a={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(t=>t.startsWith("^")?t.slice(1):t),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:e.outputs};return null!=e.inputs&&(a.inputParams=e.inputs.reduce((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t),{})),null!=e.attrs&&(a.attrParams=e.attrs.reduce((e,a)=>{const n=a.type;let r=void 0;switch(a.type){case"string":r=j(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=j(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":r=F(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=F(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":r=A(t.attr,a.tfName,a.defaultValue||0),void 0===r&&a.tfDeprecatedName&&(r=A(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":r=C(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=C(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":r=E(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=E(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":r=M(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=M(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":r=x(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=x(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":r=L(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=L(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":r=P(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=P(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":r=S(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=S(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":r=_(t.attr,a.tfName,a.defaultValue),void 0===r&&a.tfDeprecatedName&&(r=_(t.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${t.op}`)}return e[a.name]={value:r,type:n},e},{})),a}mapFunction(t){const e=t.nodeDef,a=[];let n={};null!=e&&(n=e.reduce((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&a.push(t[e.name]),t),{}));const r=[],u=[];t.signature.inputArg.forEach(t=>{const[e]=Object(s.b)(t.name),a={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:I(t.type),type:"dtype"}},children:[]};a.signatureKey=t.name,r.push(a),n[e]=a});Object.keys(n).forEach(t=>{const e=n[t];e.inputNames.forEach((t,a)=>{const[r,,u]=Object(s.b)(t),o=n[r];if(null!=o.outputs){const t=o.outputs.indexOf(u);if(-1!==t){const n=`${r}:${t}`;e.inputNames[a]=n}}e.inputs.push(o),o.children.push(e)})});const o=t.ret;t.signature.outputArg.forEach(t=>{const[e,a]=Object(s.b)(o[t.name]),r=n[e];null!=r&&(r.defaultOutput=a,u.push(r))});const c=this.mapArgsToSignature(t);return{nodes:n,inputs:r,outputs:u,weights:a,placeholders:[],signature:c}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t),{}),outputs:t.signature.outputArg.reduce((e,a)=>(e[a.name]=this.mapArgToTensorInfo(a,t.ret),e),{})}}mapArgToTensorInfo(t,e){let a=t.name;return null!=e&&(a=e[a]),{name:a,dtype:t.type}}}function v(e,a){const r=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const a=Object(n.de)().global;if(void 0!==a.atob)return a.atob(e);if(void 0!==t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return a?r:r.toLowerCase()}function j(t,e,a,n=!1){const r=t[e];return null!=r?v(r.s,n):a}function E(t,e,a){const n=t[e];return n?n.b:a}function A(t,e,a){const n=t[e]||{},r=null!=n.i?n.i:null!=n.f?n.f:a;return"number"==typeof r?r:parseInt(r,10)}function I(t){switch("string"==typeof t&&(t=r.a[t]),t){case r.a.DT_FLOAT:case r.a.DT_HALF:return"float32";case r.a.DT_INT32:case r.a.DT_INT64:case r.a.DT_INT8:case r.a.DT_UINT8:return"int32";case r.a.DT_BOOL:return"bool";case r.a.DT_DOUBLE:return"float32";case r.a.DT_STRING:return"string";default:return null}}function _(t,e,a){const n=t[e];return n&&n.func?n.func.name:a}function P(t,e,a){const n=t[e];return n&&n.type?I(n.type):a}function S(t,e,a){const n=t[e];return n&&n.list&&n.list.type?n.list.type.map(t=>I(t)):a}function $(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(t=>"number"==typeof t.size?t.size:parseInt(t.size,10)):[]}function x(t,e,a){const n=t[e];return n&&n.shape?$(n.shape):a}function C(t,e,a){const n=t[e];return n?((n.list.f&&n.list.f.length?n.list.f:n.list.i)||[]).map(t=>"number"==typeof t?t:parseInt(t,10)):a}function F(t,e,a,n=!1){const r=t[e];return r&&r.list&&r.list.s?r.list.s.map(t=>v(t,n)):a}function L(t,e,a){const n=t[e];return n&&n.list&&n.list.shape?n.list.shape.map(t=>$(t)):a}function M(t,e,a){const n=t[e];return n&&n.list&&n.list.b?n.list.b:a}}).call(this,a(416).Buffer)},455:function(t,e,a){"use strict";a.d(e,"a",(function(){return v}));var n=a(0),r=a(733),u=a(191),s=a(734),o=a(735),c=a(736),i=a(738),p=a(739),l=a(740),f=a(741),d=a(742),m=a(743),h=a(745),b=a(746),g=a(747),N=a(748),y=a(749),D=a(750),w=a(751),O=a(752),k=a(753),T=a(754),V=a(755);
/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
function v(t,e,a,v,j=n.Af){const E=((t,e,a)=>{switch(t.category){case"arithmetic":return j(()=>s.a(t,e,a));case"basic_math":return j(()=>o.a(t,e,a));case"control":return c.a(t,e,a);case"convolution":return j(()=>i.a(t,e,a));case"creation":return j(()=>p.a(t,e,a));case"dynamic":return l.a(t,e,a);case"evaluation":return j(()=>f.a(t,e,a));case"image":return j(()=>h.a(t,e,a));case"graph":return j(()=>d.a(t,e,a));case"logical":return j(()=>b.a(t,e,a));case"matrices":return j(()=>g.a(t,e,a));case"normalization":return j(()=>N.a(t,e,a));case"ragged":return j(()=>y.a(t,e,a));case"reduction":return j(()=>D.a(t,e,a));case"slice_join":return j(()=>w.a(t,e,a));case"sparse":return j(()=>O.a(t,e,a));case"spectral":return j(()=>k.a(t,e,a));case"string":return j(()=>T.a(t,e,a));case"transformation":return j(()=>V.a(t,e,a));case"hash_table":return m.a(t,e,a,v);case"custom":const n=Object(u.a)(t.op);if(n&&n.customExecutor)return n.customExecutor(new r.a(t,e,a));throw TypeError(`Custom op ${t.op} is not registered.`);default:throw TypeError(`Unknown op '${t.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,a);return n.Hf.isPromise(E)?E.then(t=>[].concat(t)):[].concat(E)}},550:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));
/** @license See the LICENSE file. */
const n="4.1.0"}}]);