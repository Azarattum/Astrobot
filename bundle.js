!function(t){function e(e){for(var s,r,c=e[0],a=e[1],h=e[2],d=0,u=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&u.push(n[r][0]),n[r]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s]);for(l&&l(e);u.length;)u.shift()();return o.push.apply(o,h||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,c=1;c<i.length;c++){var a=i[c];0!==n[a]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},n={0:0},o=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var h=0;h<c.length;h++)e(c[h]);var l=a;o.push([1097,12,75,72,84,23,59,73,86,91,9,79,68,6,26,38,31,43,85,92,67,87,30,11,2,19,83,8,44,90,35,62,56,3,15,48,22,4,33,18,24,94,63,76,1,69,93,34,51,10,95,66,45,16,47,55,81,36,32,57,61,40,29,28,58,14,89,53,88,49,71,39,65,7,50,60,37,78,52,77,80,27,42,74,41,21,17,82,64,46,5,70,25,20,13,54]),i()}({1094:function(t,e,i){"use strict";i.d(e,"a",(function(){return Mouse}));var s=i(358);class Mouse extends(Object(s.a)()){constructor(t=""){super("Mouse"+t),this.x=this.container.clientWidth/2-5,this.y=this.container.clientHeight/2-5}async initialize(){this.container.addEventListener("mousemove",this.onMove.bind(this)),this.container.addEventListener("click",this.onClick.bind(this)),setInterval(this.update.bind(this),33)}onMove(t){this.x=t.x-this.container.offsetLeft,this.y=t.y-this.container.offsetTop}onClick(t){this.emit("shot")}update(){this.emit("moved",this.x,this.y)}}},1097:function(t,e,i){"use strict";i.r(e);const s=new(i(556).a);window.addEventListener("load",async()=>{await s.initialize()})},1104:function(t,e){},1105:function(t,e){},1113:function(t,e){},1256:function(t,e){},1257:function(t,e){},1258:function(t,e){},160:function(t,e,i){"use strict";i.d(e,"a",(function(){return PhysicalObject}));var s=i(163);class PhysicalObject extends s.a{constructor(){super(),this.currentTick=0,this.bounciness=1,this.solid=!1,this.mass=1,this.friction=.1,this.acceleration=[0,0],this.velocity=[0,0],this.forces=[]}colided(t){if(this.solid&&t.solid){const e=this.getCollisionVelocity(t),i=t.getCollisionVelocity(this);t.velocity=i,this.velocity=e}}getCollisionVelocity(t){if(!Number.isFinite(this.mass))return this.velocity.slice();const e=this.bounciness*t.bounciness,i=Number.isFinite(t.mass)?t.mass:Math.sign(t.mass)*Number.MAX_SAFE_INTEGER;return this.velocity.map((s,n)=>s-(1+e)*(i/(i+this.mass))*(s-t.velocity[n]))}get speed(){return Math.sqrt(this.velocity.reduce((t,e)=>t+e*e,0))}tick(){this.currentTick++,this.acceleration.fill(0);for(const t of this.forces)t.forEach((t,e)=>{this.acceleration[e]+=t/this.mass});this.acceleration.forEach((t,e)=>{this.acceleration[e]-=this.velocity[e]*this.friction/this.mass}),this.acceleration.forEach((t,e)=>{this.velocity[e]+=t}),this.velocity.forEach((t,e)=>{this.position[e]+=t})}}},163:function(t,e,i){"use strict";i.d(e,"a",(function(){return RenderObject}));class RenderObject{constructor(){this.position=[0,0],this.size=[1,1],this.color=[255,255,255,1],this.destroyed=!1,this.autoDestroy=!1}render(t){t.fillStyle=this.fill,t.fillRect(this.x,this.y,this.width,this.height)}get x(){return this.position[0]}set x(t){this.position[0]=t}get y(){return this.position[1]}set y(t){this.position[1]=t}get width(){return this.size[0]}set width(t){this.size[0]=t}get height(){return this.size[1]}set height(t){this.size[1]=t}get fill(){return`rgba(${this.color[0]}, ${this.color[1]}, ${this.color[2]}, ${null!=this.color[3]?this.color[3]:1})`}destroy(){this.destroyed=!0}static areColided(t,e){return!(t.y+t.height<e.y||t.y>e.y+e.height||t.x+t.width<e.x||t.x>e.x+e.width)}}},198:function(t,e,i){"use strict";i.d(e,"a",(function(){return Asteroid}));var s=i(160),n=i(360);class Asteroid extends s.a{constructor(t,e){super();this.size=[30*Math.random()+15,30*Math.random()+15],this.color=[140,20,75],this.position=[t,e],this.velocity=[10*Math.random()*2-10,10*Math.random()*2-10],this.mass=(this.size[0]+this.size[1])/2,this.friction=0,this.bounciness=.2,this.autoDestroy=!0,this.solid=!0}colided(t){super.colided(t),t instanceof n.a&&this.destroy()}}},270:function(t,e,i){"use strict";i.d(e,"a",(function(){return Bot}));var s=i(359),n=i(562),o=i(163),r=i(198);class Bot extends s.a{constructor(t,e,i){super(),this.brain=i||new n.a,this.scene=t,this.autoDestroy=!0,this.solid=!1,this.callback=e,this.fitness=0,this.best=0,this.position=[this.scene.width/2-5,this.scene.height/2-5],this.poiter=new o.a,this.poiter.size=[40,40],this.poiter.color=[0,0,255,.4],this.visuals=new Array(100).fill(0).map(t=>{const e=new o.a;return e.size=[40,40],e})}copy(){const t=new Bot(this.scene,this.callback,this.brain.copy());return t.best=Math.max(this.fitness,this.best),t}mutate(t){this.best=0,this.brain.mutate(t)}tick(){this.destroyed||this.fitness++;const t=this.getView(500,50),e=(this.brain.predict(t),this.brain.predict(t)),i=[0,0];for(let t=0;t<e.length;t++){const s=e[t],n=2*Math.PI/e.length*t;i[0]+=Math.cos(n)*s,i[1]+=Math.sin(n)*s}const s=this.x+200*i[0]+this.size[0]/2,n=this.y+200*i[1]+this.size[1]/2;this.poiter.position=[s-20,n-20],this.move(s,n),super.tick()}destroy(){var t;super.destroy(),this.poiter.destroy(),this.visuals.forEach(t=>t.destroy()),null===(t=this.callback)||void 0===t||t.call(this,this)}getView(t,e){const i=new Array(Math.pow(t/e,2)).fill(0),s=t/e;for(let n=0;n<t;n+=e)for(let c=0;c<t;c+=e){const a=this.x-t/2+c,h=this.y-t/2+n,l=new o.a;l.position=[a,h],l.size=[e,e];let d=-26,u=[0,0];for(const t of this.scene.objects)if(t instanceof r.a&&o.a.areColided(t,l)){const e=this.position.map((e,i)=>e-t.position[i]),i=Math.sqrt(e.reduce((t,e)=>t+e*e,0)),s=t.velocity.map((t,e)=>t-this.velocity[e]).reduce((t,i,s)=>t+i*e[s],0)/i;u=u.map((e,i)=>e+t.velocity[i]),d<s&&(d=s)}a<0&&(d=Math.max(d,-this.velocity[0])),h<0&&(d=Math.max(d,-this.velocity[1])),a>this.scene.width&&(d=Math.max(d,this.velocity[0])),h>this.scene.height&&(d=Math.max(d,this.velocity[1]));const f=d/26;let p=n/e*t/e+c/e;i[p]+=(f+1)/2,i[p]=Math.min(i[p],1),u[0]>0&&p%s+1<s&&p++,u[0]<0&&p%s-1>=0&&p--,u[1]>0&&p+s<Math.pow(s,2)&&(p+=s),u[1]<0&&p-s>=0&&(p-=s),i[p]+=(f+1)/4,i[p]=Math.min(i[p],1)}if(this.visuals.length)for(let n=0;n<Math.pow(s,2);n++){const o=this.x-t/2+n%s*e,r=this.y-t/2+Math.floor(n/s)*e,c=i[n];this.visuals[n].position=[o,r],this.visuals[n].color=[255*c,0,0,.5]}return i}}},358:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var s=i(560),n=i(55);function o(){return class Controller{constructor(t){this.type="Controllers",this.callbacks={},this.sender=null,this.bindings=null,this.safe=!0,this.name=t}bind(){this.bindings=new Map;const t=Array.from(document.querySelectorAll(`[controller=${this.name.toLowerCase()}]`)).reverse();for(const e of t){const t=new s.a(e);t.bind(),this.bindings.set(e,t)}}close(){this.callbacks={}}on(t,e){t in this.callbacks||(this.callbacks[t]=[]),this.callbacks[t].push(e)}emit(t,...e){this.callbacks[t]&&this.callbacks[t].forEach(t=>t.call(t,...e))}expose(t,e=null){globalThis[this.name]||(globalThis[this.name]={});const i=e||this[t].bind(this);globalThis[this.name][t]=(...t)=>{let e;if(null===event||void 0===event?void 0:event.target)this.sender=event.target,e=i(...t);else{const s=Array.from(document.querySelectorAll(`[controller=${this.name.toLowerCase()}]`)).reverse();e=new Set;let o=null;for(const r of s){this.sender=r;const s=i(...t);null!=s&&("object"==typeof s?(o||(o={}),n.b.mergeObjects(o,s)):e.add(s))}e=o||(e.size>1?Array.from(e):e.values().next().value),this.sender=null}return e}}get container(){let t=this.sender?this.sender.closest(`[controller=${this.name.toLowerCase()}]`):null;if(t=t||document.querySelector(`[controller=${this.name.toLowerCase()}]`),!t)throw new Error(`Container ${this.name} not found!`);return t}get data(){if(!this.bindings)throw new Error("Use this.bind() to bind your data first!");let t=[];if(this.sender){const e=this.bindings.get(this.container);e&&(t=[e])}else t=Array.from(this.bindings.values());const e={get:(t,i)=>{const s=(t.__origin?t.__origin+".":"")+i,n=t[i];return"object"==typeof n||void 0===n?new Proxy(Object.assign(Object.assign({},n),{__origin:s}),e):n},set:(e,i,s)=>{if(!this.bindings)return!1;const n=(e.__origin?e.__origin+".":"")+i;e[i]=s;for(const e of t)e.set(n,s,!this.safe);return!0}},i={};for(const e of t)n.b.mergeObjects(i,e.get());return i.__origin="",new Proxy(i,e)}}}"undefined"==typeof globalThis&&(window.globalThis=window),globalThis.Controller=new Proxy({},{get:(t,e)=>{if(!event)return;let i=event.target,s=null;for(;null==s||null==globalThis[s]||null==globalThis[s][e];){if(s=i.getAttribute("controller"),s&&(s=s.charAt(0).toUpperCase()+s.slice(1)),!i.parentElement)return;i=i.parentElement}return globalThis[s][e]}})},359:function(t,e,i){"use strict";i.d(e,"a",(function(){return Player}));var s=i(160),n=i(360),o=i(198);class Player extends s.a{constructor(){super(),this.size=[20,20],this.color=[255,255,255],this.position=[0,0],this.movementForce=[0,0],this.direction=0,this.solid=!0,this.forces.push(this.movementForce)}move(t,e){const i=(t-this.x-this.width/2)/100,s=(e-this.y-this.height/2)/100;this.movementForce[0]=i,this.movementForce[1]=s}shoot(){if(this.destroyed)return null;const t=Math.sqrt(Math.pow(this.size[0],2)+Math.pow(this.size[1],2))/1.25,e=new n.a(this.x+this.width/2+Math.cos(this.direction)*t-this.width/10,this.y+this.height/2+Math.sin(this.direction)*t-this.height/10,this.direction,this.velocity.slice());return e.size[0]=this.size[0]/5,e.size[1]=this.size[1]/5,e}tick(){if(super.tick(),this.speed>.25){let t=Math.atan(this.velocity[1]/this.velocity[0]);this.acceleration[0]<0&&(t+=Math.PI),this.direction=t}}render(t){super.render(t);const e=[this.x+this.width/2,this.y+this.height/2],i=Math.sqrt(Math.pow(this.size[0],2)+Math.pow(this.size[1],2))/1.25;t.strokeStyle=this.fill,t.lineWidth=i/4,t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[0]+Math.cos(this.direction)*i,e[1]+Math.sin(this.direction)*i),t.closePath(),t.stroke()}colided(t){super.colided(t),t instanceof o.a&&this.destroy()}}},360:function(t,e,i){"use strict";i.d(e,"a",(function(){return Bullet}));var s=i(160);class Bullet extends s.a{constructor(t,e,i,s=[0,0]){super(),this.size=[5,5],this.color=[255,255,255],this.position=[t,e],this.velocity=s,this.mass=.1,this.autoDestroy=!0;this.forces.push([3*Math.cos(i),3*Math.sin(i)])}}},55:function(t,e,i){"use strict";i.d(e,"b",(function(){return Utils})),i.d(e,"a",(function(){return s}));class Utils{static log(t,e=s.INFO){const i=`[${(new Date).toTimeString().split(" ")[0]}]: `;switch(e){case s.INFO:console.log(i+"%c[1mi[0m "+t,"font-weight:bold;");break;case s.OK:console.log(i+"[32m[1m%c✓ "+t+"[0m","color:green;font-weight:bold;");break;case s.ERROR:console.error(i+"[31m[1m%c✘ "+t+"[0m","color:red;font-weight:bold;");break;case s.WARNING:console.warn(i+"[33m[1m%c![0m [33m"+t+"[0m","color:goldenrod;font-weight:bold;");break;case s.DIVIDER:{const e="=".repeat(30-t.length/2);console.log(e+t+e+(t.length%2?"=":""));break}default:throw new TypeError("Unknown log type!")}}static mergeObjects(t,e){for(const i in e)"object"==typeof e[i]?(t[i]||(t[i]={}),this.mergeObjects(t[i],e[i])):t[i]?Array.isArray(t[i])?t[i].includes(e[i])||t[i].push(e[i]):t[i]!=e[i]&&(t[i]=[t[i],e[i]]):t[i]=e[i]}}var s;!function(t){t[t.INFO=0]="INFO",t[t.OK=1]="OK",t[t.WARNING=2]="WARNING",t[t.ERROR=3]="ERROR",t[t.DIVIDER=4]="DIVIDER"}(s||(s={}))},556:function(t,e,i){"use strict";i.d(e,"a",(function(){return App}));var s=i(557),n=i(558),o=i(559),r=i(1094);class App{constructor(){this.manger=null,this.events=null}async initialize(){const t=[new o.a,new r.a];this.manger=new s.a(t),this.events=new n.a(t);const e=await this.getComponentArguments();await this.events.registerEvents(),await this.manger.initialize(e)}async getComponentArguments(){if(!this.manger)throw new Error("Initialize manager first!");return{}}close(){this.manger&&(this.manger.close(),this.manger=null),this.events=null}}},557:function(t,e,i){"use strict";i.d(e,"a",(function(){return Manager}));var s=i(55);class Manager{constructor(t){this.logging=!0;const e=["Services","Views","Controllers"];this.components=t.sort((t,i)=>e.indexOf(t.type)>=e.indexOf(i.type)?1:-1)}async initialize(t=[]){let e=0;this.logging&&s.b.log("Initializtion started...");let i="";for(const n in this.components){const o=this.components[n];this.logging&&i!=o.type&&(s.b.log(o.type,s.a.DIVIDER),i=o.type);try{const e=Array.isArray(t)?t[n]:t[o.name];e&&o.initialize?await o.initialize(...e):o.initialize&&await o.initialize(),this.logging&&s.b.log(o.name+" initialized!",s.a.OK)}catch(t){this.logging&&s.b.log(o.name+" initialization exception:\n\t"+t.stack.replace(/\n/g,"\n\t"),s.a.ERROR),e++}}this.logging&&(s.b.log("",s.a.DIVIDER),e?s.b.log(`Initialization completed with ${e} exceptions!`,s.a.WARNING):s.b.log("Successfyly initialized!",s.a.OK))}close(){this.logging&&(s.b.log("",s.a.DIVIDER),s.b.log("Closing all components..."));let t=0;for(const e of this.components)try{e.close&&e.close(),this.logging&&s.b.log(e.name+" closed!",s.a.OK)}catch(i){this.logging&&s.b.log(e.name+" closing exception:\n\t"+i.stack.replace(/\n/g,"\n\t"),s.a.ERROR),t++}this.logging&&(s.b.log("",s.a.DIVIDER),t?s.b.log(`Stopped with ${t} exceptions!`,s.a.WARNING):s.b.log("Successfyly stopped!",s.a.OK))}getComponent(t){return this.components.find(e=>e.name.toLowerCase()==t.toLowerCase())||null}}},558:function(t,e,i){"use strict";i.d(e,"a",(function(){return EnvetsHandler}));class EnvetsHandler{constructor(t){const e={};t.forEach(t=>e[t.name]=t),this.gameController=e.Game,this.mouseController=e.Mouse}async registerEvents(){this.mouseController.on("moved",(t,e)=>{this.gameController.movePlayer(t,e)}),this.mouseController.on("shot",()=>{this.gameController.shoot()})}}},559:function(t,e,i){"use strict";i.d(e,"a",(function(){return Game}));var s=i(358),n=i(561),o=i(359),r=i(198),c=i(270);class Game extends(Object(s.a)()){constructor(t=""){super("Game"+t),this.context=null,this.scene=null,this.player=null,this.cycles=1}async initialize(){const t=this.container;if(t.height=document.body.clientHeight,t.width=document.body.clientWidth,this.context=t.getContext("2d"),!this.context)return;const e=new n.a(this.context);this.scene=e;const i=new c.a(e);i.brain.load("assets/model_cc_6000.json"),i.color=[134,141,154];const s=new c.a(e);s.brain.load("assets/model_cc_10k.json"),s.color=[142,1,42];const r=new c.a(e);r.brain.load("assets/model_cc_12k.json"),r.color=[152,157,23];const a=new c.a(e);a.brain.load("assets/model_cc_5k_lastgen.json"),a.color=[42,7,223],this.player=new o.a,this.player.position=[t.width/2,t.height/2],this.scene.objects.push(i),this.scene.objects.push(s),this.scene.objects.push(r),this.scene.objects.push(a),this.scene.objects.push(this.player),this.render(),setInterval(this.tick.bind(this),20),this.expose("render",()=>{var t;null===(t=this.scene)||void 0===t||t.render()}),this.expose("speedup",t=>{this.cycles=t}),this.expose("tick",t=>{const e=this.cycles;this.cycles=t||1,this.tick(),this.cycles=e}),this.expose("visualize",t=>{population.visualize=t})}shoot(){if(!this.player||!this.scene)return;const t=this.player.shoot();t&&this.scene.objects.push(t)}movePlayer(t,e){if(!this.player)return;const i=(t-this.player.x-this.player.width/2)/100,s=(e-this.player.y-this.player.height/2)/100;this.player.movementForce[0]=i,this.player.movementForce[1]=s}tick(){if(this.scene)for(let t=0;t<this.cycles;t++){this.scene.tick();if(this.scene.objects.filter(t=>t instanceof r.a).length<20){let t,e;switch(Math.floor(4*Math.random())){case 0:t=-40,e=Math.random()*this.scene.height;break;case 1:t=Math.random()*this.scene.width,e=-40;break;case 2:t=this.scene.width,e=Math.random()*this.scene.height;break;case 3:t=Math.random()*this.scene.width,e=this.scene.height;break;default:t=0,e=0}const i=new r.a(t,e);this.scene.objects.push(i)}}}render(){this.scene&&(this.scene.render(),requestAnimationFrame(this.render.bind(this)))}}},560:function(t,e,i){"use strict";i.d(e,"a",(function(){return Binding}));class Binding{constructor(t){this.removedEvent=new Event("removed"),this.placeholders=new Map,this.container=t,this.loops=new Map,this.binds=new Map,this.data={}}bind(){const t=this.container.querySelectorAll("placeholder"),e=this.container.querySelectorAll("[placeholders]"),i=this.container.querySelectorAll("[iterate]"),s=this.container.querySelectorAll("input[bind]");i.forEach(this.bindLoop.bind(this)),e.forEach(this.bindAttribute.bind(this)),t.forEach(this.bindElement.bind(this)),s.forEach(this.bindInput.bind(this))}register(t,e,i="",s=""){var n;let o=e;if(e instanceof Attr&&(o=e.ownerElement),!this.container.contains(o))return;this.placeholders.has(t)||this.placeholders.set(t,new Set);const r={prefix:i,postfix:s,element:e};null===(n=this.placeholders.get(t))||void 0===n||n.add(r),o.addEventListener("removed",()=>{var e;null===(e=this.placeholders.get(t))||void 0===e||e.delete(r)})}bindElement(t){var e;const i=null===(e=t.attributes.item(0))||void 0===e?void 0:e.name;if(!i||!this.container.contains(t))return;if(this.register(i,t),t.innerHTML="",t.observed)return;new MutationObserver(t=>{var e;const i=t[t.length-1],s=(null===(e=i.addedNodes[0])||void 0===e?void 0:e.textContent)||"";if(!s)return;const n=i.target.attributes[0].name;this.set(n,s)}).observe(t,{childList:!0}),t.observed=!0}bindAttribute(t){var e;const i=t.getAttributeNode("placeholders");if(!i)return;if(""!=i.value){const e=i.value.split(";");for(const i of e){if(!i)continue;const e=i.split(":"),s=t.getAttributeNode(e[0]),n=e[1];if(!n||!s)return;const o=t.getAttribute("_"+s.name)||"",r=t.getAttribute(s.name+"_")||"";this.register(n,s,o,r)}return}i.value="";const s=t.attributes;for(const n of s){const s=n.value.match(/^(.*)<placeholder ([\w.]+)><!--/);if(!s)continue;const o=s[2],r=s[1]||"",c=(null===(e=t.getAttribute("__postfix_"+o))||void 0===e?void 0:e.slice(17))||"";r&&t.setAttribute("_"+n.name,r),c&&t.setAttribute(n.name+"_",c),n.value=r+c,i.value+=`${n.name}:${o};`,this.register(o,n,r,c),t.removeAttribute("__postfix_"+o)}if(t.observed)return;new MutationObserver(e=>{var i;const s=e[e.length-1].attributeName;if(!s)return;let n=t.getAttribute(s);if(!n)return;const o=t.getAttribute(s+"_")||"",r=t.getAttribute("_"+s)||"";n=n.slice(r.length,n.length-o.length);let c=null;const a=null===(i=t.getAttribute("placeholders"))||void 0===i?void 0:i.split(";");if(a){for(const t of a)t.split(":")[0]==s&&(c=t.split(":")[1]);c&&this.set(c,n)}}).observe(t,{attributes:!0}),t.observed=!0}bindInput(t){var e;const i=t.getAttributeNode("bind");if(!(null==i?void 0:i.value.startsWith("data.")))return;if(!this.container.contains(t))return;const s=i.value.slice(5);i.value=s;const n=()=>{["radio","checkbox"].includes(t.type)?this.set(s,t.checked):this.set(s,t.value)};if("radio"==t.type){this.container.querySelectorAll(`input[type="radio"][name="${t.name}"]`).forEach(t=>{t.addEventListener("input",n)})}else t.addEventListener("input",n);n(),this.binds.has(s)||this.binds.set(s,new Set),null===(e=this.binds.get(s))||void 0===e||e.add(t),t.addEventListener("removed",()=>{var e;null===(e=this.binds.get(s))||void 0===e||e.delete(t)})}bindLoop(t){var e,i;const s=t.getAttributeNode("iterate");if(!s||!this.container.contains(t))return;s.value=s.value.replace("data.","");const n=document.createElement("template");n.content.appendChild(t.cloneNode(!0)),null===(e=t.parentNode)||void 0===e||e.replaceChild(n,t),this.loops.has(s.value)||this.loops.set(s.value,new Set),null===(i=this.loops.get(s.value))||void 0===i||i.add(n),n.addEventListener("removed",()=>{var t;null===(t=this.loops.get(s.value))||void 0===t||t.delete(n)})}createLoopElement(t,e){var i;const s=t.content.firstElementChild;if(!s)return;const n=s.getAttribute("iterate");if(!n)return;const o=s.cloneNode(!0),r=o.querySelectorAll("placeholder"),c=o.querySelectorAll("[placeholders]"),a=o.querySelectorAll("[iterate]"),h=o.querySelectorAll("[bind]");r.forEach(t=>{const i=t.attributes[0].name,s=i.replace(n,`${n}.${e}`);t.removeAttribute(i),t.setAttribute(s,""),this.bindElement(t)}),c.forEach(t=>{this.bindAttribute(t);let i=t.getAttribute("placeholders");if(!i)return;const s=(":"+n).replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");i=i.replace(new RegExp(s,"g"),`:${n}.${e}`),t.setAttribute("placeholders",i)}),a.forEach(t=>{let i=t.getAttribute("iterate")||"";i=i.replace(n,`${n}.${e}`),t.setAttribute("iterate",i)}),h.forEach(t=>{let i=t.getAttribute("bind")||"";i=i.replace(n,`${n}.${e}`),t.setAttribute("bind",i)}),this.bindAttribute(o);let l=o.getAttribute("placeholders");if(l){const t=(":"+n).replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");l=l.replace(new RegExp(t,"g"),`:${n}.${e}`),o.setAttribute("placeholders",l)}null===(i=t.parentNode)||void 0===i||i.insertBefore(o,t),a.forEach(this.bindLoop.bind(this)),h.forEach(this.bindInput.bind(this)),c.forEach(this.bindAttribute.bind(this)),r.forEach(this.bindElement.bind(this)),this.bindAttribute(o)}get(t){if(!t)return this.data;let e=this.data;const i=t.split(".");for(const t of i)void 0===e[t]&&(e[t]={}),e=e[t];return e}set(t,e,i=!1){var s;let n=!1;if("object"==typeof e){const s=this.loops.get(t)||[];if(Array.isArray(e))for(const e of s){let i=e.previousElementSibling;for(;i;){const e=i.previousElementSibling;i.getAttribute("iterate")==t&&(i.remove(),i.querySelectorAll("template,placeholder,[placeholders],[bind]").forEach(t=>{t.dispatchEvent(this.removedEvent)})),i=e}}for(const o in e){if(Array.isArray(e))for(const t of s)this.createLoopElement(t,+o);n=this.set(t+"."+o,e[o],i)||n}return n}null===(s=this.binds.get(t))||void 0===s||s.forEach(i=>{i.getAttribute("bind")===t&&(["radio","checkbox"].includes(i.type)?i.checked!=e!=!0&&"true"!=e||(i.checked=!0===e||"true"==e,i.value==e&&(i.dispatchEvent(new Event("input")),n=!0)):i.value!=e.toString()&&(i.value=e,i.value==e&&(i.dispatchEvent(new Event("input")),n=!0)))});const o=this.placeholders.get(t);if(null==o||o.forEach(t=>{const s=t.prefix+e+t.postfix,o=t.element;o instanceof Attr?o.nodeValue!=s&&(o.nodeValue=s,n=!0):i?o.innerHTML!=s&&(o.innerHTML=s,n=!0):o.textContent!=s&&(o.textContent=s,n=!0)}),n&&void 0!==e){let i=this.data;const s=t.split("."),n=s.pop();if(n){for(const t of s)"object"!=typeof i[t]&&(i[t]={}),i=i[t];i[n]=e.toString()}}return n}}},561:function(t,e,i){"use strict";i.d(e,"a",(function(){return Scene}));var s=i(163),n=i(160);class Scene{constructor(t){this.context=t,this.objects=[]}get width(){return this.context.canvas.width}get height(){return this.context.canvas.height}render(){this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle="black",this.context.fillRect(0,0,this.width,this.height);for(const t of this.objects)t.render(this.context)}tick(){const t=[];for(const e in this.objects){const i=this.objects[e];if(i instanceof n.a){i.tick();for(let t=+e+1;t<this.objects.length;t++){const e=this.objects[t];e instanceof n.a&&(s.a.areColided(i,e)&&i.colided(e))}}i.autoDestroy&&this.isOutOfScene(i)&&i.destroy(),i.destroyed&&t.push(i)}for(const e of t)this.objects.splice(this.objects.indexOf(e),1)}isOutOfScene(t){return t.x+t.width<-50||t.y+t.height<-50||t.x>this.width+50||t.y>this.height+50}}},562:function(t,e,i){"use strict";i.d(e,"a",(function(){return NeuralNetwork}));var s=i(92);class NeuralNetwork{constructor(){this.gaussianPrevious=null,s.e("cpu");this.model=new s.a;const t=s.c.conv2d({inputShape:[Math.sqrt(100),Math.sqrt(100),1],filters:4,kernelSize:3}),e=s.c.averagePooling2d({poolSize:2}),i=s.c.conv2d({filters:4,kernelSize:2}),n=s.c.flatten({}),o=s.c.dense({units:16,activation:"sigmoid"}),r=s.c.dense({units:8,activation:"sigmoid"}),c=s.c.dense({units:4,activation:"softmax"});this.model.add(t),this.model.add(e),this.model.add(i),this.model.add(n),this.model.add(o),this.model.add(r),this.model.add(c)}async load(t){this.model=await s.d(t)}predict(t){const e=s.f(t,this.model.inputs[0].shape.map(t=>t||1)),i=this.model.predict(e),n=i.dataSync();return s.b(e),s.b(i),Array.from(n)}gaussianRandom(){let t,e,i,s;if(null!=this.gaussianPrevious)t=this.gaussianPrevious,this.gaussianPrevious=null;else{do{e=2*Math.random()-1,i=2*Math.random()-1,s=e*e+i*i}while(s>=1);s=Math.sqrt(-2*Math.log(s)/s),t=e*s,this.gaussianPrevious=i*s}return t}mutate(t){s.g(()=>{const e=this.model.getWeights(),i=[];for(const n of e){const e=n.shape,o=n.dataSync().slice();for(const e in o)Math.random()<t&&(o[e]+=this.gaussianRandom());const r=s.f(o,e);i.push(r)}this.model.setWeights(i)})}copy(){return s.g(()=>{const t=new NeuralNetwork,e=this.model.getWeights().map(t=>t.clone());return t.model.setWeights(e),t})}destroy(){this.model.dispose()}}}});